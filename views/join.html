{% extends 'layout.html' %} {% block content %}
<div style=" height:100%;">
<img src="/manito.svg" id ="loginImg">
<form id="loginForm" action="/auth/join" method="post">
	<div style="text-align:center">
		{% if find %}
	        <input style="width:60% ;border:none; border-bottom:1px solid #828282; background-color:#fafafa; margin-bottom:10px;" id="schoolName" type="schoolName" name="schoolName"  value="{{find}}" onkeyPress="return false;" required />
		    <input type="hidden" name="code" value="{{code}}">
			<a href="/findSchool" class="btn"><i class="fas fa-search-location"></i>학교선택</a>
		{% else %}
	        <input style="width:60% ;border:none; border-bottom:1px solid #828282; background-color:#fafafa; margin-bottom:10px;" id="schoolName" type="schoolName" name="schoolName"  placeholder="버튼을 눌러주세요--->" onkeyPress="return false;" required />
			<a href="/findSchool" class="btn"><i class="fas fa-search-location"></i>학교선택</a>
		{% endif %}

		<div class="input_group">
        <input style="width:60% ;border:none; border-bottom:1px solid #828282; background-color:#fafafa; "maxlength="8" id="nick" type="nick" name="nick" placeholder="사용할 닉네임" required autofocus/>
		<div id="overlapNick" class="btn"><i class="far fa-check-circle"></i>중복확인</div>
	    </div>
    <p></p>
		<div class="input_group">
			
   		</div>
    <div class="input_group">
        <input style="width:60% ;border:none; border-bottom:1px solid #828282; background-color:#fafafa " maxlength="20" id="email" type="Id" name="email"  placeholder="아이디" required  />
		<div id="overlapId" class="btn"><i class="far fa-check-circle"></i>중복확인</div>

    </div>
    <p></p>
    <div class="input_group">
        <input style="width:83% ;border:none; border-bottom:1px solid #828282; background-color:#fafafa " id="password" type="password" name="password" placeholder="비밀번호" required />
    </div>
    <p></p>
	<label for="man">
	<input id="man" type="radio" name="sexual" value="man"  />
		<span id="o">남자</span>
	</label>
	<label for="woman">
	<input id="woman" type="radio" name="sexual" value="woman"  />
		<span id="w">여자</span>
	</label>
		
    <p></p>
    
		<p>
		</p>
    <button id="joinBtn" type="submit" class="btn">가입</button>
	</div>
</form>
	
</div>
{% endblock %}
{% block script %}
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
	 document.getElementById('overlapNick').addEventListener('click', function (e) {
		 const nick=document.getElementById('nick').value;
		  axios.post(`/auth/overlapNick/${nick}`)
        	.then((data) => {
			  if(data.data.chk)
				alert('사용가능한 닉네임 입니다.')				  
			  else
				alert('중복된 닉네임 입니다.')				  
	        })
       		 .catch((err) => {
      	  });
    });
	 document.getElementById('overlapId').addEventListener('click', function (e) {
		 const email=document.getElementById('email').value;
		  axios.post(`/auth/overlapId/${email}`)
        	.then((data) => {
			  if(data.data.chk)
				alert('사용가능한 닉네임 입니다.')				  
			  else
				alert('중복된 닉네임 입니다.')				  
	        })
       		 .catch((err) => {
      	  });
    });
	
</script>
{% endblock %}
